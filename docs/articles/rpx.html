<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An R interface to the ProteomeXchange repository • rpx</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">rpx</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/lgatto/rpx">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>An R interface to the ProteomeXchange repository</h1>
                        <h4 class="author">Laurent Gatto</h4>
            <address class="author_afil">
      Computational Proteomics Unit, Cambridge, UK<br>
</address>
</div>

    
    
<div class="contents">
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>The goal of the <em><a href="http://bioconductor.org/packages/rpx">rpx</a></em> package is to provide programmatic access to proteomics data from R, in particular to the ProteomeXchange (PX) central repository (see <a href="http://www.proteomexchange.org/" class="uri">http://www.proteomexchange.org/</a> and <a href="http://central.proteomexchange.org/" class="uri">http://central.proteomexchange.org/</a>).</p>
<blockquote>
<p>Vizcaino J.A. et al. <em>ProteomeXchange: globally co-ordinated proteomics data submission and dissemination</em>, Nature Biotechnology 2014, 32, 223 – 226, <a href="doi:10.1038/nbt.2839" class="uri">doi:10.1038/nbt.2839</a>.</p>
</blockquote>
<p>Additional repositories are likely to be added in the future.</p>
</div>
<div id="the-rpx-package" class="section level1">
<h1 class="hasAnchor">
<a href="#the-rpx-package" class="anchor"></a>The <em><a href="http://bioconductor.org/packages/rpx">rpx</a></em> package</h1>
<div id="pxdataset-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#pxdataset-objects" class="anchor"></a><code>PXDataset</code> objects</h2>
<p>The central object that handles data access is the <code>PXDataset</code> class. Such an instance can be generated by passing a valid PX experiment identifier to the <code>PXDataset</code> constructor.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"rpx"</span>)
id &lt;-<span class="st"> "PXD000001"</span>
px &lt;-<span class="st"> </span><span class="kw"><a href="../reference/PXDataset-class.html">PXDataset</a></span>(id)
px</code></pre></div>
<pre><code>## Object of class "PXDataset"
##  Id: PXD000001 with 12 files
##  [1] 'F063721.dat' ... [12] 'generated'
##  Use 'pxfiles(.)' to see all files.</code></pre>
</div>
<div id="data-and-meta-data" class="section level2">
<h2 class="hasAnchor">
<a href="#data-and-meta-data" class="anchor"></a>Data and meta-data</h2>
<p>Several attributes can be extracted from an <code>PXDataset</code> instance, as described below.</p>
<p>The experiment identifier, that was originally used to create the  instance can be extracted with the  method:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PXDataset-class.html">pxid</a></span>(px)</code></pre></div>
<pre><code>## [1] "PXD000001"</code></pre>
<p>The file transfer url where the data files can be accessed can be queried with the <code>pxurl</code> method:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PXDataset-class.html">pxurl</a></span>(px)</code></pre></div>
<pre><code>## [1] "ftp://ftp.pride.ebi.ac.uk/pride/data/archive/2012/03/PXD000001"</code></pre>
<p>The species the data has been generated the data can be obtain calling the <code>pxtax</code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PXDataset-class.html">pxtax</a></span>(px)</code></pre></div>
<pre><code>## [1] "Erwinia carotovora"</code></pre>
<p>Relevant bibliographic references can be queried with the <code>pxref</code> method:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">strwrap</span>(<span class="kw"><a href="../reference/PXDataset-class.html">pxref</a></span>(px))</code></pre></div>
<pre><code>## [1] "&lt;!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\"&gt; &lt;html&gt;&lt;head&gt;"                                                                                         
## [2] "&lt;title&gt;301 Moved Permanently&lt;/title&gt; &lt;/head&gt;&lt;body&gt; &lt;h1&gt;Moved"                                                                                              
## [3] "Permanently&lt;/h1&gt; &lt;p&gt;The document has moved &lt;a"                                                                                                             
## [4] "href=\"https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi/efetch.fcgi?db=pubmed&amp;amp;id=23692960&amp;amp;rettype=docsum&amp;amp;retmode=text\"&gt;here&lt;/a&gt;.&lt;/p&gt;"
## [5] "&lt;/body&gt;&lt;/html&gt;"</code></pre>
<p>All files available for the PX experiment can be obtained with the <code>pxfiles</code> method:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PXDataset-class.html">pxfiles</a></span>(px)</code></pre></div>
<pre><code>##  [1] "F063721.dat"                                                         
##  [2] "F063721.dat-mztab.txt"                                               
##  [3] "PRIDE_Exp_Complete_Ac_22134.xml.gz"                                  
##  [4] "PRIDE_Exp_mzData_Ac_22134.xml.gz"                                    
##  [5] "PXD000001_mztab.txt"                                                 
##  [6] "README.txt"                                                          
##  [7] "TMT_Erwinia_1uLSike_Top10HCD_isol2_45stepped_60min_01-20141210.mzML" 
##  [8] "TMT_Erwinia_1uLSike_Top10HCD_isol2_45stepped_60min_01-20141210.mzXML"
##  [9] "TMT_Erwinia_1uLSike_Top10HCD_isol2_45stepped_60min_01.mzXML"         
## [10] "TMT_Erwinia_1uLSike_Top10HCD_isol2_45stepped_60min_01.raw"           
## [11] "erwinia_carotovora.fasta"                                            
## [12] "generated"</code></pre>
<p>The complete or partial data set can be downloaded with the <code>pxget</code> function. The function takes an instance of class <code>PXDataset</code> as first mandatory argument.</p>
<p>The next argument, <code>list</code>, specifies what files to download. If missing, a menu is printed and the user can select a file. If set to <code>"all"</code>, all files of the experiment are downloaded in the working directory. Alternatively, numerics or logicals can also be used to subset the relevant files to be downloaded based on the <code><a href="../reference/PXDataset-class.html">pxfiles(.)</a></code> output.</p>
<p>The last argument, <code>force</code>, can be set to <code>TRUE</code> to force the download of files that already exists in the working directory.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PXDataset-class.html">pxget</a></span>(px, <span class="st">"erwinia_carotovora.fasta"</span>)</code></pre></div>
<pre><code>## Downloading 1 file</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dir</span>(<span class="dt">pattern =</span> <span class="st">"fasta"</span>)</code></pre></div>
<pre><code>## [1] "erwinia_carotovora.fasta"</code></pre>
<p>By default, <code>pxget</code> will not download and overwrite a file if already available. The last argument of <code>pxget</code>, <code>force</code>, can be set to <code>TRUE</code> to force the download of files that already exists in the working directory.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(i &lt;-<span class="st"> </span><span class="kw">grep</span>(<span class="st">"fasta"</span>, <span class="kw"><a href="../reference/PXDataset-class.html">pxfiles</a></span>(px)))</code></pre></div>
<pre><code>## [1] 11</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PXDataset-class.html">pxget</a></span>(px, i) ## same as above</code></pre></div>
<pre><code>## Downloading 1 file</code></pre>
<pre><code>## /home/lg390/dev/00_github/rpx/docs/articles/erwinia_carotovora.fasta already present.</code></pre>
<p>Finally, a list of recent PX additions and updates can be obtained using the <code><a href="../reference/pxannounced.html">pxannounced()</a></code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/pxannounced.html">pxannounced</a></span>()</code></pre></div>
<pre><code>## 15 new ProteomeXchange annoucements</code></pre>
<pre><code>##     Data.Set    Publication.Data             Message
## 1  PXD006766 2017-07-12 12:38:11                 New
## 2  PXD002901 2017-07-11 12:58:23                 New
## 3  PXD006084 2017-07-11 12:41:58                 New
## 4  PXD002118 2017-07-11 12:39:28                 New
## 5  PXD006377 2017-07-11 11:57:22 Updated information
## 6  PXD006834 2017-07-11 11:56:27                 New
## 7  PXD006103 2017-07-11 11:39:10                 New
## 8  PXD006412 2017-07-11 11:33:13                 New
## 9  PXD002942 2017-07-11 11:22:43                 New
## 10 PXD005854 2017-07-11 11:12:35                 New
## 11 PXD004244 2017-07-11 10:33:27                 New
## 12 PXD005554 2017-07-11 10:19:41                 New
## 13 PXD005092 2017-07-11 09:35:12                 New
## 14 PXD004261 2017-07-11 09:31:26                 New
## 15 PXD001828 2017-07-10 14:43:04                 New</code></pre>
</div>
<div id="a-simple-use-case" class="section level2">
<h2 class="hasAnchor">
<a href="#a-simple-use-case" class="anchor"></a>A simple use-case</h2>
<p>Below, we show how to automate the extraction of files of interest (fasta and mzTab files), download them and read them using appropriate Bioconductor infrastructure. (Note that we read version 0.9 of the MzTab format below. For recent data, the <code>version</code> argument would be omitted.)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(mzt &lt;-<span class="st"> </span><span class="kw">grep</span>(<span class="st">"F0.+mztab"</span>, <span class="kw"><a href="../reference/PXDataset-class.html">pxfiles</a></span>(px), <span class="dt">value =</span> <span class="ot">TRUE</span>))</code></pre></div>
<pre><code>## [1] "F063721.dat-mztab.txt"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(fas &lt;-<span class="st"> </span><span class="kw">grep</span>(<span class="st">"fasta"</span>, <span class="kw"><a href="../reference/PXDataset-class.html">pxfiles</a></span>(px), <span class="dt">value =</span> <span class="ot">TRUE</span>))</code></pre></div>
<pre><code>## [1] "erwinia_carotovora.fasta"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PXDataset-class.html">pxget</a></span>(px, <span class="kw">c</span>(mzt, fas))</code></pre></div>
<pre><code>## Downloading 2 files</code></pre>
<pre><code>## /home/lg390/dev/00_github/rpx/docs/articles/erwinia_carotovora.fasta already present.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"Biostrings"</span>)
<span class="kw">readAAStringSet</span>(fas)</code></pre></div>
<pre><code>##   A AAStringSet instance of length 4499
##        width seq                                       names               
##    [1]   147 MADITLISGSTLGSAEYVA...QIPEDPAEEWLGSWVNLLK ECA0001 putative ...
##    [2]   153 VAEIYQIDNLDRGILSALM...QSTETLISLQNPIMRTIAP ECA0002 AsnC-fami...
##    [3]   330 MKKQYIEKQQQISFVKSFF...QVQCGVWPQPLRESVSGLL ECA0003 putative ...
##    [4]   492 MITLESLEMLLSIDENELL...FDTGLKSRLMRRWQHGKAY ECA0004 conserved...
##    [5]   499 MRQTAALAERISRLSHALE...IEASLQQVAEQIQQSEQQD ECA0005 conserved...
##    ...   ... ...
## [4495]   634 MSDKIIHLTDDSFDTDVLK...KVDPLRVFASDMARRLELL trx-rv3790 trx-rv...
## [4496]    93 MTKMNNKARRTARELKHLG...LRDEFPMGYLGDYKDDDDK TimBlower TimBlower
## [4497]   309 MFSNLSKRWAQRTLSKSFY...KWAGIKTRKFVFNPPKPRK sp|P07143|CY1_YEA...
## [4498]   231 FPTDDDDKIVGGYTCAANS...VYTKVCNYVNWIQQTIAAN sp|P00761|TRYP_PI...
## [4499]   269 GVSGSCNIDVVCPEGNGHR...AGTGAQFIDGLDSTGTPPV sp|Q7M135|LYSC_LY...</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"MSnbase"</span>)
(x &lt;-<span class="st"> </span><span class="kw">readMzTabData</span>(mzt, <span class="st">"PEP"</span>, <span class="dt">version =</span> <span class="st">"0.9"</span>))</code></pre></div>
<pre><code>## MSnSet (storageMode: lockedEnvironment)
## assayData: 1528 features, 6 samples 
##   element names: exprs 
## protocolData: none
## phenoData
##   sampleNames: sub[1] sub[2] ... sub[6] (6 total)
##   varLabels: abundance
##   varMetadata: labelDescription
## featureData
##   featureNames: 1 2 ... 1528 (1528 total)
##   fvarLabels: sequence accession ... uri (14 total)
##   fvarMetadata: labelDescription
## experimentData: use 'experimentData(object)'
## Annotation:  
## - - - Processing information - - -
## mzTab read: Wed Jul 12 14:31:51 2017 
##  MSnbase version: 2.3.9</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(<span class="kw">exprs</span>(x))</code></pre></div>
<pre><code>##     sub[1]   sub[2]   sub[3]   sub[4]   sub[5]   sub[6]
## 1 10630132 11238708 12424917 10997763  9928972 10398534
## 2 11105690 12403253 13160903 12229367 11061660 10131218
## 3  1183431  1322371  1599088  1243715  1306602  1159064
## 4  5384958  5508454  6883086  6136023  5626680  5213771
## 5 18033537 17926487 21052620 19810368 17381162 17268329
## 6  9873585 10299931 11142071 10258214  9664315  9518271</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(<span class="kw">fData</span>(x)[, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>])</code></pre></div>
<pre><code>##    sequence accession
## 1   DGVSVAR   ECA0625
## 2    NVVLDK   ECA0625
## 3 VEDALHATR   ECA0625
## 4 LAGGVAVIK   ECA0625
## 5  LIAEAMEK   ECA0625
## 6 SFGAPTITK   ECA0625</code></pre>
</div>
</div>
<div id="questions-and-help" class="section level1">
<h1 class="hasAnchor">
<a href="#questions-and-help" class="anchor"></a>Questions and help</h1>
<p>Eithe post questions on the <a href="https://support.bioconductor.org/">Bioconductor support forum</a> or open a GitHub <a href="https://github.com/lgatto/rpx/issues">issue</a>.</p>
</div>
<div id="session-information" class="section level1">
<h1 class="hasAnchor">
<a href="#session-information" class="anchor"></a>Session information</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sessionInfo</span>()</code></pre></div>
<pre><code>## R version 3.4.0 Patched (2017-06-12 r72786)
## Platform: x86_64-pc-linux-gnu (64-bit)
## Running under: Ubuntu 14.04.5 LTS
## 
## Matrix products: default
## BLAS: /usr/lib/atlas-base/libf77blas.so.3.0
## LAPACK: /usr/lib/lapack/liblapack.so.3.0
## 
## locale:
##  [1] LC_CTYPE=en_GB.UTF-8       LC_NUMERIC=C              
##  [3] LC_TIME=en_GB.UTF-8        LC_COLLATE=en_GB.UTF-8    
##  [5] LC_MONETARY=en_GB.UTF-8    LC_MESSAGES=en_GB.UTF-8   
##  [7] LC_PAPER=en_GB.UTF-8       LC_NAME=C                 
##  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
## [11] LC_MEASUREMENT=en_GB.UTF-8 LC_IDENTIFICATION=C       
## 
## attached base packages:
## [1] stats4    parallel  stats     graphics  grDevices utils     datasets 
## [8] methods   base     
## 
## other attached packages:
##  [1] rpx_1.13.1          MSnbase_2.3.9       ProtGenerics_1.9.0 
##  [4] BiocParallel_1.11.4 mzR_2.11.4          Rcpp_0.12.11       
##  [7] Biobase_2.37.2      Biostrings_2.45.2   XVector_0.17.0     
## [10] IRanges_2.11.6      S4Vectors_0.15.5    BiocGenerics_0.23.0
## [13] BiocStyle_2.5.4    
## 
## loaded via a namespace (and not attached):
##  [1] BiocInstaller_1.27.2  compiler_3.4.0        plyr_1.8.4           
##  [4] bitops_1.0-6          iterators_1.0.8       tools_3.4.0          
##  [7] zlibbioc_1.23.0       MALDIquant_1.16.2     digest_0.6.12        
## [10] evaluate_0.10.1       tibble_1.3.3          preprocessCore_1.39.0
## [13] gtable_0.2.0          lattice_0.20-35       rlang_0.1.1.9000     
## [16] foreach_1.4.3         curl_2.7              yaml_2.1.14          
## [19] xml2_1.1.1            stringr_1.2.0         knitr_1.16           
## [22] rprojroot_1.2         grid_3.4.0            impute_1.51.0        
## [25] XML_3.98-1.9          rmarkdown_1.6         limma_3.33.3         
## [28] ggplot2_2.2.1         magrittr_1.5          backports_1.1.0      
## [31] scales_0.4.1          pcaMethods_1.69.0     codetools_0.2-15     
## [34] htmltools_0.3.6       mzID_1.15.0           colorspace_1.3-2     
## [37] affy_1.55.0           stringi_1.1.5         RCurl_1.95-4.8       
## [40] doParallel_1.0.10     lazyeval_0.2.0        munsell_0.4.3        
## [43] vsn_3.45.0            affyio_1.47.0</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li>
<a href="#the-rpx-package">The <em><a href="http://bioconductor.org/packages/rpx">rpx</a></em> package</a><ul class="nav nav-pills nav-stacked">
<li><a href="#pxdataset-objects"><code>PXDataset</code> objects</a></li>
      <li><a href="#data-and-meta-data">Data and meta-data</a></li>
      <li><a href="#a-simple-use-case">A simple use-case</a></li>
      </ul>
</li>
      <li><a href="#questions-and-help">Questions and help</a></li>
      <li><a href="#session-information">Session information</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Laurent Gatto.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
