<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>An R interface to the ProteomeXchange repository &bull; rpx</title><!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous"><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">rpx</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/lgatto/rpx">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>An R interface to the ProteomeXchange repository</h1>
                        <h4 class="author">Laurent Gatto</h4>
            <address class="author_afil">
      Computational Proteomics Unit, Cambridge, UK<br></address></div>

    
    
<div class="contents">
<div id="introduction" class="section level1">
<h1 class="hasAnchor"><html><body><a href="#introduction" class="anchor"> </a></body></html>Introduction</h1>
<p>The goal of the <em><a href="http://bioconductor.org/packages/rpx">rpx</a></em> package is to provide programmatic access to proteomics data from R, in particular to the ProteomeXchange (PX) central repository (see <a href="http://www.proteomexchange.org/">http://www.proteomexchange.org/</a> and <a href="http://central.proteomexchange.org/">http://central.proteomexchange.org/</a>).</p>
<blockquote>
<p>Vizcaino J.A. et al. <em>ProteomeXchange: globally co-ordinated proteomics data submission and dissemination</em>, Nature Biotechnology 2014, 32, 223 &ndash; 226, <a href="doi:10.1038/nbt.2839">doi:10.1038/nbt.2839</a>.</p>
</blockquote>
<p>Additional repositories are likely to be added in the future.</p>
</div>
<div id="the-rpx-package" class="section level1">
<h1 class="hasAnchor"><html><body><a href="#the-rpx-package" class="anchor"> </a></body></html>The <em><a href="http://bioconductor.org/packages/rpx">rpx</a></em> package</h1>
<div id="pxdataset-objects" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#pxdataset-objects" class="anchor"> </a></body></html><code>PXDataset</code> objects</h2>
<p>The central object that handles data access is the <code>PXDataset</code> class. Such an instance can be generated by passing a valid PX experiment identifier to the <code>PXDataset</code> constructor.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"rpx"</span>)
id &lt;-<span class="st"> "PXD000001"</span>
px &lt;-<span class="st"> </span><span class="kw"><a href="../reference/PXDataset-class.html">PXDataset</a></span>(id)
px</code></pre>
<pre><code>## Object of class "PXDataset"
##  Id: PXD000001 with 10 files
##  [1] 'F063721.dat' ... [10] 'erwinia_carotovora.fasta'
##  Use 'pxfiles(.)' to see all files.</code></pre>
</div>
<div id="data-and-meta-data" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#data-and-meta-data" class="anchor"> </a></body></html>Data and meta-data</h2>
<p>Several attributes can be extracted from an <code>PXDataset</code> instance, as described below.</p>
<p>The experiment identifier, that was originally used to create the  instance can be extracted with the  method:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PXDataset-class.html">pxid</a></span>(px)</code></pre>
<pre><code>## [1] "PXD000001"</code></pre>
<p>The file transfer url where the data files can be accessed can be queried with the <code>pxurl</code> method:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PXDataset-class.html">pxurl</a></span>(px)</code></pre>
<pre><code>## [1] "ftp://ftp.pride.ebi.ac.uk/pride/data/archive/2012/03/PXD000001"</code></pre>
<p>The species the data has been generated the data can be obtain calling the <code>pxtax</code> function:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PXDataset-class.html">pxtax</a></span>(px)</code></pre>
<pre><code>## [1] "Erwinia carotovora"</code></pre>
<p>Relevant bibliographic references can be queried with the <code>pxref</code> method:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">strwrap</span>(<span class="kw"><a href="../reference/PXDataset-class.html">pxref</a></span>(px))</code></pre>
<pre><code>## [1] "Gatto L, Christoforou A. Using R and Bioconductor for proteomics" 
## [2] "data analysis. Biochim Biophys Acta. 2014 Jan;1844(1 Pt A):42-51."
## [3] "Review"</code></pre>
<p>All files available for the PX experiment can be obtained with the <code>pxfiles</code> method:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PXDataset-class.html">pxfiles</a></span>(px)</code></pre>
<pre><code>##  [1] "F063721.dat"                                                         
##  [2] "F063721.dat-mztab.txt"                                               
##  [3] "PRIDE_Exp_Complete_Ac_22134.xml.gz"                                  
##  [4] "PRIDE_Exp_mzData_Ac_22134.xml.gz"                                    
##  [5] "PXD000001_mztab.txt"                                                 
##  [6] "TMT_Erwinia_1uLSike_Top10HCD_isol2_45stepped_60min_01-20141210.mzML" 
##  [7] "TMT_Erwinia_1uLSike_Top10HCD_isol2_45stepped_60min_01-20141210.mzXML"
##  [8] "TMT_Erwinia_1uLSike_Top10HCD_isol2_45stepped_60min_01.mzXML"         
##  [9] "TMT_Erwinia_1uLSike_Top10HCD_isol2_45stepped_60min_01.raw"           
## [10] "erwinia_carotovora.fasta"</code></pre>
<p>The complete or partial data set can be downloaded with the <code>pxget</code> function. The function takes an instance of class <code>PXDataset</code> as first mandatory argument.</p>
<p>The next argument, <code>list</code>, specifies what files to download. If missing, a menu is printed and the user can select a file. If set to <code>"all"</code>, all files of the experiment are downloaded in the working directory. Alternatively, numerics or logicals can also be used to subset the relevant files to be downloaded based on the <code><a href="../reference/PXDataset-class.html">pxfiles(.)</a></code> output.</p>
<p>The last argument, <code>force</code>, can be set to <code>TRUE</code> to force the download of files that already exists in the working directory.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PXDataset-class.html">pxget</a></span>(px, <span class="st">"erwinia_carotovora.fasta"</span>)</code></pre>
<pre><code>## Downloading 1 file</code></pre>
<pre><code>## erwinia_carotovora.fasta already present.</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dir</span>(<span class="dt">pattern =</span> <span class="st">"fasta"</span>)</code></pre>
<pre><code>## [1] "erwinia_carotovora.fasta"</code></pre>
<p>By default, <code>pxget</code> will not download and overwrite a file if already available. The last argument of <code>pxget</code>, <code>force</code>, can be set to <code>TRUE</code> to force the download of files that already exists in the working directory.</p>
<pre class="sourceCode r"><code class="sourceCode r">(i &lt;-<span class="st"> </span><span class="kw">grep</span>(<span class="st">"fasta"</span>, <span class="kw"><a href="../reference/PXDataset-class.html">pxfiles</a></span>(px)))</code></pre>
<pre><code>## [1] 10</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PXDataset-class.html">pxget</a></span>(px, i) ## same as above</code></pre>
<pre><code>## Downloading 1 file</code></pre>
<pre><code>## erwinia_carotovora.fasta already present.</code></pre>
<p>Finally, a list of recent PX additions and updates can be obtained using the <code><a href="../reference/pxannounced.html">pxannounced()</a></code> function:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/pxannounced.html">pxannounced</a></span>()</code></pre>
<pre><code>## 15 new ProteomeXchange annoucements</code></pre>
<pre><code>##     Data.Set    Publication.Data             Message
## 1  PXD004173 2016-12-22 17:03:21                 New
## 2  PXD005184 2016-12-22 16:25:57                 New
## 3  PXD000115 2016-12-22 15:50:21                 New
## 4  PXD004236 2016-12-22 15:31:36                 New
## 5  PXD001889 2016-12-22 13:48:49 Updated information
## 6  PXD004069 2016-12-22 13:48:20                 New
## 7  PXD004541 2016-12-22 13:34:14                 New
## 8  PXD004626 2016-12-22 12:46:54                 New
## 9  PXD004625 2016-12-22 12:38:40                 New
## 10 PXD004624 2016-12-22 12:30:17                 New
## 11 PXD005462 2016-12-22 12:22:00                 New
## 12 PXD004966 2016-12-22 12:10:18                 New
## 13 PXD004987 2016-12-22 11:57:32                 New
## 14 PXD004932 2016-12-22 11:43:35                 New
## 15 PXD004947 2016-12-22 11:04:47                 New</code></pre>
</div>
<div id="a-simple-use-case" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#a-simple-use-case" class="anchor"> </a></body></html>A simple use-case</h2>
<p>Below, we show how to automate the extraction of files of interest (fasta and mzTab files), download them and read them using appropriate Bioconductor infrastructure. (Note that we read version 0.9 of the MzTab format below. For recent data, the <code>version</code> argument would be omitted.)</p>
<pre class="sourceCode r"><code class="sourceCode r">(mzt &lt;-<span class="st"> </span><span class="kw">grep</span>(<span class="st">"F0.+mztab"</span>, <span class="kw"><a href="../reference/PXDataset-class.html">pxfiles</a></span>(px), <span class="dt">value =</span> <span class="ot">TRUE</span>))</code></pre>
<pre><code>## [1] "F063721.dat-mztab.txt"</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">(fas &lt;-<span class="st"> </span><span class="kw">grep</span>(<span class="st">"fasta"</span>, <span class="kw"><a href="../reference/PXDataset-class.html">pxfiles</a></span>(px), <span class="dt">value =</span> <span class="ot">TRUE</span>))</code></pre>
<pre><code>## [1] "erwinia_carotovora.fasta"</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PXDataset-class.html">pxget</a></span>(px, <span class="kw">c</span>(mzt, fas))</code></pre>
<pre><code>## Downloading 2 files</code></pre>
<pre><code>## F063721.dat-mztab.txt already present.</code></pre>
<pre><code>## erwinia_carotovora.fasta already present.</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"Biostrings"</span>)
<span class="kw">readAAStringSet</span>(fas)</code></pre>
<pre><code>##   A AAStringSet instance of length 4499
##        width seq                                       names               
##    [1]   147 MADITLISGSTLGSAEYVA...QIPEDPAEEWLGSWVNLLK ECA0001 putative ...
##    [2]   153 VAEIYQIDNLDRGILSALM...QSTETLISLQNPIMRTIAP ECA0002 AsnC-fami...
##    [3]   330 MKKQYIEKQQQISFVKSFF...QVQCGVWPQPLRESVSGLL ECA0003 putative ...
##    [4]   492 MITLESLEMLLSIDENELL...FDTGLKSRLMRRWQHGKAY ECA0004 conserved...
##    [5]   499 MRQTAALAERISRLSHALE...IEASLQQVAEQIQQSEQQD ECA0005 conserved...
##    ...   ... ...
## [4495]   634 MSDKIIHLTDDSFDTDVLK...KVDPLRVFASDMARRLELL trx-rv3790 trx-rv...
## [4496]    93 MTKMNNKARRTARELKHLG...LRDEFPMGYLGDYKDDDDK TimBlower TimBlower
## [4497]   309 MFSNLSKRWAQRTLSKSFY...KWAGIKTRKFVFNPPKPRK sp|P07143|CY1_YEA...
## [4498]   231 FPTDDDDKIVGGYTCAANS...VYTKVCNYVNWIQQTIAAN sp|P00761|TRYP_PI...
## [4499]   269 GVSGSCNIDVVCPEGNGHR...AGTGAQFIDGLDSTGTPPV sp|Q7M135|LYSC_LY...</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"MSnbase"</span>)
(x &lt;-<span class="st"> </span><span class="kw">readMzTabData</span>(mzt, <span class="st">"PEP"</span>, <span class="dt">version =</span> <span class="st">"0.9"</span>))</code></pre>
<pre><code>## Detected a metadata section</code></pre>
<pre><code>## Detected a peptide section</code></pre>
<pre><code>## MSnSet (storageMode: lockedEnvironment)
## assayData: 1528 features, 6 samples 
##   element names: exprs 
## protocolData: none
## phenoData
##   sampleNames: sub[1] sub[2] ... sub[6] (6 total)
##   varLabels: abundance
##   varMetadata: labelDescription
## featureData
##   featureNames: 1 2 ... 1528 (1528 total)
##   fvarLabels: sequence accession ... uri (14 total)
##   fvarMetadata: labelDescription
## experimentData: use 'experimentData(object)'
## Annotation:  
## - - - Processing information - - -
## mzTab read: Thu Dec 22 17:45:50 2016 
##  MSnbase version: 2.1.5</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(<span class="kw">exprs</span>(x))</code></pre>
<pre><code>##     sub[1]   sub[2]   sub[3]   sub[4]   sub[5]   sub[6]
## 1 10630132 11238708 12424917 10997763  9928972 10398534
## 2 11105690 12403253 13160903 12229367 11061660 10131218
## 3  1183431  1322371  1599088  1243715  1306602  1159064
## 4  5384958  5508454  6883086  6136023  5626680  5213771
## 5 18033537 17926487 21052620 19810368 17381162 17268329
## 6  9873585 10299931 11142071 10258214  9664315  9518271</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(<span class="kw">fData</span>(x)[, <span class="dv">1</span>:<span class="dv">2</span>])</code></pre>
<pre><code>##    sequence accession
## 1   DGVSVAR   ECA0625
## 2    NVVLDK   ECA0625
## 3 VEDALHATR   ECA0625
## 4 LAGGVAVIK   ECA0625
## 5  LIAEAMEK   ECA0625
## 6 SFGAPTITK   ECA0625</code></pre>
</div>
</div>
<div id="questions-and-help" class="section level1">
<h1 class="hasAnchor"><html><body><a href="#questions-and-help" class="anchor"> </a></body></html>Questions and help</h1>
<p>Eithe post questions on the <a href="https://support.bioconductor.org/">Bioconductor support forum</a> or open a GitHub <a href="https://github.com/lgatto/rpx/issues">issue</a>.</p>
</div>
<div id="session-information" class="section level1">
<h1 class="hasAnchor"><html><body><a href="#session-information" class="anchor"> </a></body></html>Session information</h1>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sessionInfo</span>()</code></pre>
<pre><code>## R Under development (unstable) (2016-12-09 r71771)
## Platform: x86_64-pc-linux-gnu (64-bit)
## Running under: Ubuntu 14.04.5 LTS
## 
## locale:
##  [1] LC_CTYPE=en_GB.UTF-8       LC_NUMERIC=C              
##  [3] LC_TIME=en_GB.UTF-8        LC_COLLATE=en_GB.UTF-8    
##  [5] LC_MONETARY=en_GB.UTF-8    LC_MESSAGES=en_GB.UTF-8   
##  [7] LC_PAPER=en_GB.UTF-8       LC_NAME=C                 
##  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
## [11] LC_MEASUREMENT=en_GB.UTF-8 LC_IDENTIFICATION=C       
## 
## attached base packages:
## [1] stats4    parallel  stats     graphics  grDevices utils     datasets 
## [8] methods   base     
## 
## other attached packages:
##  [1] Biostrings_2.43.1   XVector_0.15.0      IRanges_2.9.14     
##  [4] S4Vectors_0.13.5    BiocStyle_2.3.28    MSnbase_2.1.5      
##  [7] ProtGenerics_1.7.0  BiocParallel_1.9.3  mzR_2.9.1          
## [10] Rcpp_0.12.8.2       Biobase_2.35.0      BiocGenerics_0.21.1
## [13] rpx_1.11.1          pkgdown_0.1.0.9000 
## 
## loaded via a namespace (and not attached):
##  [1] purrr_0.2.2           reshape2_1.4.2        lattice_0.20-34      
##  [4] colorspace_1.3-2      testthat_1.0.2        htmltools_0.3.5      
##  [7] yaml_2.1.14           vsn_3.43.7            XML_3.98-1.5         
## [10] pkgbuild_0.0.0.9000   withr_1.0.2           affy_1.53.0          
## [13] msdata_0.15.0         foreach_1.4.3         affyio_1.45.0        
## [16] plyr_1.8.4            mzID_1.13.0           zlibbioc_1.21.0      
## [19] stringr_1.1.0         munsell_0.4.3         pcaMethods_1.67.0    
## [22] gtable_0.2.0          devtools_1.12.0.9000  codetools_0.2-15     
## [25] memoise_1.0.0         evaluate_0.10         knitr_1.15.1         
## [28] highlight_0.4.7       doParallel_1.0.10     BiocInstaller_1.25.2 
## [31] preprocessCore_1.37.0 backports_1.0.4       scales_0.4.1         
## [34] limma_3.31.7          desc_1.0.1            pkgload_0.0.0.9000   
## [37] impute_1.49.0         ggplot2_2.2.0         digest_0.6.10        
## [40] stringi_1.1.2         rprojroot_1.1         grid_3.4.0           
## [43] tools_3.4.0           bitops_1.0-6          magrittr_1.5         
## [46] lazyeval_0.2.0        RCurl_1.95-4.8        tibble_1.2           
## [49] crayon_1.3.2          whisker_0.3-2         xml2_1.0.0.9002      
## [52] iterators_1.0.8       assertthat_0.1        rmarkdown_1.3        
## [55] roxygen2_5.0.1        R6_2.2.0              MALDIquant_1.16      
## [58] compiler_3.4.0</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked"><li><a href="#introduction">Introduction</a></li>
      <li><a href="#the-rpx-package">The <em><a href="http://bioconductor.org/packages/rpx">rpx</a></em> package</a><ul class="nav nav-pills nav-stacked"><li><a href="#pxdataset-objects"><code>PXDataset</code> objects</a></li>
      <li><a href="#data-and-meta-data">Data and meta-data</a></li>
      <li><a href="#a-simple-use-case">A simple use-case</a></li>
      </ul></li>
      <li><a href="#questions-and-help">Questions and help</a></li>
      <li><a href="#session-information">Session information</a></li>
      </ul></div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Laurent Gatto.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer></div>

  </body></html>
